package text;

import java.io.IOException;

public class Main {
    public static void main(String[] args) {
        // 检查命令行参数是否正确
        if (args.length != 3) {
            System.err.println("用法: java -jar main.jar [原文文件路径] [抄袭版论文路径] [答案文件路径]");
            System.exit(1);
        }
        
        String originalPath = args[0];
        String plagiarizedPath = args[1];
        String resultPath = args[2];
        
        try {
            // 读取文件内容
            String originalText = FileHandler.readFile(originalPath);
            String plagiarizedText = FileHandler.readFile(plagiarizedPath);
            
            // 计算相似度
            double similarity = SimilarityCalculator.calculateSimilarity(originalText, plagiarizedText);
            
            // 保留两位小数
            similarity = Math.round(similarity * 100) / 100.0;
            
            // 写入结果
            FileHandler.writeFile(resultPath, String.format("%.2f", similarity));
            
        } catch (IOException e) {
            System.err.println("文件操作错误: " + e.getMessage());
            System.exit(1);
        } catch (Exception e) {
            System.err.println("程序错误: " + e.getMessage());
            System.exit(1);
        }
    }
}

